\section{Parametric amplifier}

In this section, we discuss the requirements on amplifier noise and gain needed to reach good signal to noise ratio.
The signal to noise ratio is constrained by two factors.
First, for reasons which will become clear in the next chapter, we cannot operate the resonator with above 10 to 100 photons without inducing deleterious transitions of the qubit state.
Second, we want to measure the state as quickly as possible, so we cannot integrate signal for too long.
From Eq.\,(\ref{eq:sec:resonatorEnergyToOutputPowerRatio:ratio_lambda4_optimal}), we find that the output power of the dispersive measurement is
\begin{equation}
P_{\text{out}} = E_{\text{res}} \frac{\kappa_r}{16 r_e} = \hbar \omega_r \bar{n} \frac{\kappa_r}{16 r_e} .
\end{equation}
With $r_e \approx 1$, $\kappa_r = 1/37\,\text{ns}$ and $\bar{n}$ between 10 and 100, the output power is in the range -131\,dBm to -121\,dBm.
Supposing we want to measure the qubit state in $\sim 100 \, \text{ns}$, we need a detection bandwidth of $B \approx 100\,\text{MHz}$.
The quietest commercially available RF amplifiers are high electron mobility transistor (HEMT) amplifiers, with input referred noise temperature as low as $T \approx 3\,K$.
The noise power generated by that amplifier for our parameters is $P_{\text{HEMT}} = k_b T B = -122\,\text{dBm}$.
This amplifier noise is just about the same as the upper bound on the scattered signal power, meaning that the HEMT would degrade the SNR by a factor of two.
Therefore, we would like to use a low noise pre-amplifier with large enough gain to overcome the input referred noise of the HEMT.
We used a type of Josephson parametric amplifier (paramp) \cite{Yurke:squeezingTheory1987, Movshovich:squeezing1990, Yurke:paramp1996, Castellanos:paramp2007, Mutus:paramp2013} specially designed for large bandwidth and saturation power \cite{Mutus:IMPA2014}.
The paramp gives roughly 16\,dB gain, 700\,MHz bandwidth, -120 to -100\,dBm saturation power, and an effective noise temperature of about 330\,mK \cite{Mutus:IMPA2014}.
This noise temperature and large gain is enough to put the output noise of the paramp about five times larger than the input referred noise of the HEMT, which means that the HEMT should degrade the SNR by only about 20\%.
